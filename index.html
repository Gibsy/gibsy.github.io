<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7292 Casino Arcade</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        :root { color-scheme: dark; }
        body {
            background:
                radial-gradient(circle at 10% 0, #22d3ee22 0, transparent 40%),
                radial-gradient(circle at 90% 0, #22c55e22 0, transparent 40%),
                radial-gradient(circle at 50% 120%, #020617 0, #000 60%);
            min-height: 100vh;
        }
        .card { perspective: 1000px; }
        .card-inner { transition: transform 0.5s; transform-style: preserve-3d; }
        .card-face { backface-visibility: hidden; }
        .card-back { transform: rotateY(180deg); }
        .card.is-hidden .card-inner { transform: rotateY(180deg); }
        .glow-border { box-shadow: 0 0 30px rgba(56,189,248,.4),0 0 80px rgba(56,189,248,.2); }
        .table-felt { background: radial-gradient(circle at 10% 20%,rgba(16,185,129,.4) 0,rgba(6,95,70,.95) 45%,#022c22 100%); }
        .chip-shadow { box-shadow: 0 10px 25px rgba(15,23,42,.9); }
        .neon-text { text-shadow: 0 0 12px rgba(34,211,238,.9),0 0 30px rgba(34,211,238,.7); }
        .scrollbar-thin::-webkit-scrollbar { height: 6px; width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(148,163,184,.6); border-radius: 999px; }
        .tab-active { background: rgba(15,23,42,.95); border-color: rgba(56,189,248,.9); color: rgb(125,211,252); box-shadow: 0 0 18px rgba(56,189,248,.45); }
        .roulette-wheel {
            background: radial-gradient(circle at 30% 20%,rgba(248,250,252,.12),transparent 55%),
                        radial-gradient(circle at 50% 120%,#022c22, #022c22 40%, #020617 80%);
        }
        .mine-cell { transition: background .18s, transform .08s, box-shadow .18s, border-color .18s; }
        .mine-cell:hover:not(:disabled) { transform: translateY(-1px); box-shadow: 0 6px 18px rgba(15,23,42,.7); border-color: rgba(52,211,153,.7); }
    </style>
</head>
<body class="text-slate-100 flex items-center justify-center px-4 py-6">
<div class="max-w-6xl w-full mx-auto">
    <!-- Header -->
    <header class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-4">
        <div>
            <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight text-cyan-300 neon-text flex items-center gap-2">
                <span class="inline-flex h-9 w-9 items-center justify-center rounded-2xl bg-slate-900/80 border border-cyan-400/70 text-sm font-mono">7292</span>
                <span>Casino Arcade</span>
            </h1>
            <p class="text-slate-400 mt-1 text-sm md:text-base max-w-xl">
                –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –º–∏–Ω–∏‚Äë–∫–∞–∑–∏–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: –±–ª—ç–∫–¥–∂–µ–∫, —Ä—É–ª–µ—Ç–∫–∞, –º–æ–Ω–µ—Ç–∫–∞ –∏ –º–∏–Ω—ã.
                –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥.
            </p>
        </div>
        <div class="flex items-center gap-4">
            <div class="text-right">
                <div class="text-[11px] uppercase tracking-[0.18em] text-slate-400">–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</div>
                <div id="balanceDisplay" class="text-2xl font-semibold text-emerald-400">
                    $1 000
                </div>
            </div>
            <button id="resetBalanceBtn" class="text-[11px] px-3 py-1.5 rounded-full border border-slate-600/70 bg-slate-900/80 hover:bg-slate-800 text-slate-200 transition flex items-center gap-1">
                <span class="text-xs">‚ü≤</span>
                <span>–°–±—Ä–æ—Å</span>
            </button>
        </div>
    </header>

    <!-- Game tabs -->
    <nav class="mb-5 flex flex-wrap gap-2 text-xs sm:text-sm">
        <button data-tab="blackjack" class="game-tab tab-active flex items-center gap-1 px-3 sm:px-4 py-1.5 rounded-full border border-slate-700/80 bg-slate-900/80 hover:border-cyan-400/70 transition">
            <span>üÉè</span>
            <span>–ë–ª—ç–∫–¥–∂–µ–∫</span>
        </button>
        <button data-tab="roulette" class="game-tab flex items-center gap-1 px-3 sm:px-4 py-1.5 rounded-full border border-slate-700/80 bg-slate-900/40 hover:border-emerald-400/60 transition">
            <span>üé°</span>
            <span>–†—É–ª–µ—Ç–∫–∞</span>
        </button>
        <button data-tab="coinflip" class="game-tab flex items-center gap-1 px-3 sm:px-4 py-1.5 rounded-full border border-slate-700/80 bg-slate-900/40 hover:border-amber-400/70 transition">
            <span>ü™ô</span>
            <span>–ú–æ–Ω–µ—Ç–∫–∞</span>
        </button>
        <button data-tab="mines" class="game-tab flex items-center gap-1 px-3 sm:px-4 py-1.5 rounded-full border border-slate-700/80 bg-slate-900/40 hover:border-rose-400/70 transition">
            <span>üí£</span>
            <span>–ú–∏–Ω—ã</span>
        </button>
    </nav>

    <!-- Layout -->
    <div class="grid lg:grid-cols-[2.2fr,1fr] gap-6 items-start">
        <!-- LEFT: games -->
        <!-- BLACKJACK -->
        <main id="tab-blackjack" class="table-felt rounded-3xl border border-emerald-500/60 glow-border px-4 sm:px-6 py-6 sm:py-8 relative overflow-hidden">
            <div class="pointer-events-none absolute inset-0 opacity-40"
                 style="background: radial-gradient(circle at 20% 0, rgba(34,211,238,0.4) 0, transparent 50%),
                                  radial-gradient(circle at 80% 0, rgba(16,185,129,0.4) 0, transparent 50%);"></div>
            <div class="relative z-10 flex flex-col gap-6">
                <!-- Dealer -->
                <section>
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <span class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-900/80 border border-emerald-400/60 text-[11px]">–°–¢–û–õ</span>
                            <h2 class="font-semibold tracking-wide text-sm text-slate-200 uppercase">–†–∞–∑–¥–∞—á–∞ —Å—Ç–æ–ª–∞</h2>
                        </div>
                        <div id="dealerStatus" class="text-xs text-slate-200/80"></div>
                    </div>

                    <div class="bg-slate-950/60 border border-emerald-500/40 rounded-2xl px-3 sm:px-4 py-3 sm:py-4 shadow-xl/60">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-2 text-xs text-slate-400">
                                <span class="uppercase tracking-wide">–û—á–∫–∏ —Å—Ç–æ–ª–∞</span>
                                <span id="dealerScore" class="inline-flex items-center justify-center rounded-full border border-slate-600/80 px-2 py-0.5 text-slate-200 text-[11px]">
                                    ?
                                </span>
                            </div>
                            <span id="dealerHint" class="text-[11px] text-emerald-300/80"></span>
                        </div>

                        <div id="dealerCards" class="flex flex-wrap gap-2 sm:gap-3 min-h-[84px]"></div>
                    </div>
                </section>

                <!-- Center message -->
                <section class="flex flex-col items-center justify-center text-center">
                    <div id="roundResult" class="text-lg sm:text-xl font-semibold text-slate-100 mb-1 min-h-[1.5rem]"></div>
                    <p id="roundSubtext" class="text-xs sm:text-sm text-slate-200/80 min-h-[1.25rem]"></p>
                </section>

                <!-- Player -->
                <section>
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <span class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-emerald-500/20 border border-emerald-400/80 text-xs">–í—ã</span>
                            <h2 class="font-semibold tracking-wide text-sm text-slate-200 uppercase">–í–∞—à–∞ —Ä—É–∫–∞</h2>
                        </div>
                        <div id="playerStatus" class="text-xs text-slate-200/80"></div>
                    </div>

                    <div class="bg-slate-950/60 border border-emerald-500/40 rounded-2xl px-3 sm:px-4 py-3 sm:py-4 shadow-xl/60">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center gap-2 text-xs text-slate-400">
                                <span class="uppercase tracking-wide">–í–∞—à–∏ –æ—á–∫–∏</span>
                                <span id="playerScore" class="inline-flex items-center justify-center rounded-full border border-emerald-400/80 px-2 py-0.5 text-emerald-300 text-[11px]">
                                    0
                                </span>
                            </div>
                            <span id="playerHint" class="text-[11px] text-sky-300/90"></span>
                        </div>

                        <div id="playerCards" class="flex flex-wrap gap-2 sm:gap-3 min-h-[84px]"></div>
                    </div>
                </section>

                <!-- Controls / Betting -->
                <section class="mt-1">
                    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
                        <!-- Bet & actions -->
                        <div class="flex-1 flex flex-col gap-3">
                            <div class="flex flex-wrap items-center gap-3">
                                <div>
                                    <div class="text-xs uppercase tracking-wide text-slate-200">–°—Ç–∞–≤–∫–∞</div>
                                    <div class="flex items-center gap-2 mt-1">
                                        <div class="relative">
                                            <input id="betInput" type="number" min="10" step="10" value="50" class="w-28 rounded-xl bg-slate-950/70 border border-slate-700/80 px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-400/70 focus:border-cyan-400/80" />
                                            <span class="absolute right-2 top-1.5 text-xs text-slate-500">$</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex flex-wrap gap-2">
                                    <button data-chip="100" class="chip-btn inline-flex items-center justify-center rounded-full bg-emerald-500 text-slate-950 text-xs font-semibold px-3 py-1.5 chip-shadow hover:bg-emerald-400 transition">
                                        +100
                                    </button>
                                    <button data-chip="500" class="chip-btn inline-flex items-center justify-center rounded-full bg-sky-500 text-slate-950 text-xs font-semibold px-3 py-1.5 chip-shadow hover:bg-sky-400 transition">
                                        +500
                                    </button>
                                    <button data-chip="1000" class="chip-btn inline-flex items-center justify-center rounded-full bg-amber-400 text-slate-950 text-xs font-semibold px-3 py-1.5 chip-shadow hover:bg-amber-300 transition">
                                        +1000
                                    </button>
                                    <button data-chip="x2" class="chip-btn inline-flex items-center justify-center rounded-full bg-fuchsia-500 text-slate-50 text-xs font-semibold px-3 py-1.5 chip-shadow hover:bg-fuchsia-400 transition">
                                        √ó2
                                    </button>
                                </div>
                            </div>

                            <div class="flex flex-wrap gap-2">
                                <button id="dealBtn" class="flex-1 inline-flex items-center justify-center rounded-2xl bg-emerald-500 text-slate-950 font-semibold text-sm py-2.5 shadow-lg shadow-emerald-500/40 hover:bg-emerald-400 transition">
                                    –†–∞–∑–¥–∞—Ç—å
                                </button>
                                <button id="hitBtn" class="flex-1 inline-flex items-center justify-center rounded-2xl bg-sky-500 disabled:bg-slate-700 disabled:text-slate-400 disabled:border-slate-700 text-slate-950 font-semibold text-sm py-2.5 shadow-lg shadow-sky-500/40 hover:bg-sky-400 transition disabled:shadow-none" disabled>
                                    –ï—â–µ –∫–∞—Ä—Ç—É
                                </button>
                                <button id="standBtn" class="flex-1 inline-flex items-center justify-center rounded-2xl bg-slate-900 border border-slate-600 text-slate-100 font-semibold text-sm py-2.5 hover:bg-slate-800 transition disabled:border-slate-700 disabled:text-slate-500 disabled:bg-slate-900" disabled>
                                    –•–≤–∞—Ç–∏—Ç
                                </button>
                            </div>
                        </div>

                        <!-- Stats -->
                        <aside class="w-full md:w-64 bg-black/40 border border-slate-700/80 rounded-2xl px-3 py-3 sm:px-4 sm:py-4 text-xs text-slate-300/90 space-y-2">
                            <div class="flex items-center justify-between">
                                <span>–°—ã–≥—Ä–∞–Ω–æ —Ä–∞–∑–¥–∞—á</span>
                                <span id="statRounds" class="font-semibold text-slate-50">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>–ü–æ–±–µ–¥—ã –∏–≥—Ä–æ–∫–∞</span>
                                <span id="statWins" class="font-semibold text-emerald-400">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>–ü–æ—Ä–∞–∂–µ–Ω–∏—è</span>
                                <span id="statLosses" class="font-semibold text-rose-400">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span>–ù–∏—á—å–∏</span>
                                <span id="statPushes" class="font-semibold text-sky-300">0</span>
                            </div>
                        </aside>
                    </div>
                </section>
            </div>
        </main>

        <!-- ROULETTE -->
        <main id="tab-roulette" class="hidden roulette-wheel rounded-3xl border border-emerald-500/60 glow-border px-4 sm:px-6 py-6 sm:py-8 relative overflow-hidden">
            <div class="relative z-10 flex flex-col gap-5">
                <div class="flex items-center justify-between mb-1">
                    <h2 class="text-sm font-semibold uppercase tracking-wide text-slate-100 flex items-center gap-2">
                        <span class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-900/80 border border-emerald-400/60 text-xs">üé°</span>
                        –ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è —Ä—É–ª–µ—Ç–∫–∞
                    </h2>
                    <div class="text-[11px] text-slate-200/80" id="rouletteStatus"></div>
                </div>

                <section class="grid md:grid-cols-[1.5fr,1.1fr] gap-4 items-start">
                    <!-- Wheel / result -->
                    <div class="bg-slate-950/70 border border-emerald-500/40 rounded-2xl px-3 sm:px-4 py-4 shadow-xl flex flex-col items-center gap-4">
                        <div class="relative w-40 h-40 sm:w-48 sm:h-48 rounded-full border-4 border-emerald-500/60 flex items-center justify-center bg-slate-900/80 overflow-hidden">
                            <div class="absolute inset-3 rounded-full border border-slate-700/80"></div>
                            <div class="absolute inset-[22%] rounded-full border border-slate-800 bg-slate-900/90"></div>
                            <div class="absolute inset-[40%] rounded-full bg-gradient-to-br from-emerald-500 to-cyan-500 flex items-center justify-center text-xs font-semibold tracking-[0.2em] text-slate-950">
                                7292
                            </div>
                            <!-- sectors visual -->
                            <div class="absolute inset-1">
                                <div class="w-full h-full rounded-full bg-[conic-gradient(#ef4444_0deg_20deg,#0f172a_20deg_40deg,#22c55e_40deg_60deg,#0f172a_60deg_80deg,#ef4444_80deg_100deg,#0f172a_100deg_120deg,#22c55e_120deg_140deg,#0f172a_140deg_160deg,#ef4444_160deg_180deg,#0f172a_180deg_200deg,#22c55e_200deg_220deg,#0f172a_220deg_240deg,#ef4444_240deg_260deg,#0f172a_260deg_280deg,#22c55e_280deg_300deg,#0f172a_300deg_320deg,#ef4444_320deg_340deg,#0f172a_340deg_360deg)] opacity-80"></div>
                            </div>
                            <div class="absolute -top-3 left-1/2 -translate-x-1/2 text-amber-300 text-lg">
                                ‚ñ≤
                            </div>
                        </div>
                        <div class="text-center text-xs sm:text-sm">
                            <div class="text-slate-300">–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</div>
                            <div id="rouletteLast" class="font-semibold text-lg text-emerald-400 mt-1">‚Äì</div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="bg-slate-950/70 border border-emerald-500/40 rounded-2xl px-3 sm:px-4 py-4 shadow-xl flex flex-col gap-3 text-xs sm:text-sm">
                        <div class="flex flex-wrap gap-2 mb-1">
                            <span class="text-slate-300/90">–¢–∏–ø —Å—Ç–∞–≤–∫–∏</span>
                            <select id="rouletteBetType" class="ml-auto rounded-xl bg-slate-900 border border-slate-700 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-emerald-400/80">
                                <option value="red">–ù–∞ –∫—Ä–∞—Å–Ω–æ–µ (x2)</option>
                                <option value="black">–ù–∞ —á—ë—Ä–Ω–æ–µ (x2)</option>
                                <option value="even">–ß—ë—Ç / –ù–µ—á—ë—Ç (x2)</option>
                                <option value="first12">1‚Äì12 (x3)</option>
                                <option value="second12">13‚Äì24 (x3)</option>
                                <option value="third12">25‚Äì36 (x3)</option>
                                <option value="single">–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —á–∏—Å–ª–æ (x36)</option>
                            </select>
                        </div>

                        <div id="rouletteNumberWrapper" class="hidden flex items-center gap-2">
                            <span class="text-slate-400 text-[11px]">–ß–∏—Å–ª–æ 0‚Äì36</span>
                            <input id="rouletteNumber" type="number" min="0" max="36" value="7" class="w-20 rounded-xl bg-slate-900 border border-slate-700 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-emerald-400/80" />
                        </div>

                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-slate-300/90 text-[11px]">–°—Ç–∞–≤–∫–∞</span>
                            <input id="rouletteBet" type="number" min="10" step="10" value="50" class="w-24 rounded-xl bg-slate-900 border border-slate-700 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-emerald-400/80" />
                            <span class="text-slate-500 text-[11px]">$</span>
                        </div>
                        <div class="flex flex-wrap gap-2 mt-1">
                            <button data-rchip="100" class="roulette-chip rounded-full bg-emerald-500 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-emerald-400 transition">+100</button>
                            <button data-rchip="500" class="roulette-chip rounded-full bg-sky-500 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-sky-400 transition">+500</button>
                            <button data-rchip="1000" class="roulette-chip rounded-full bg-amber-400 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-amber-300 transition">+1000</button>
                            <button data-rchip="x2" class="roulette-chip rounded-full bg-fuchsia-500 text-slate-50 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-fuchsia-400 transition">√ó2</button>
                        </div>

                        <button id="rouletteSpin" class="mt-3 inline-flex items-center justify-center rounded-2xl bg-emerald-500 text-slate-950 font-semibold text-sm py-2 shadow-lg shadow-emerald-500/40 hover:bg-emerald-400 transition">
                            –ö—Ä—É—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É
                        </button>

                        <div class="mt-2 text-[11px] text-slate-400 space-y-1">
                            <p>–†—É–ª–µ—Ç–∫–∞ 0‚Äì36 —Å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º. –ó–µ–ª—ë–Ω—ã–π —Å–µ–∫—Ç–æ—Ä 0 –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏–≥—Ä—ã—à –¥–ª—è —Å—Ç–∞–≤–æ–∫ –Ω–∞ —Ü–≤–µ—Ç –∏ –¥–∏–∞–ø–∞–∑–æ–Ω—ã.</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- COINFLIP -->
        <main id="tab-coinflip" class="hidden rounded-3xl border border-amber-400/70 glow-border px-4 sm:px-6 py-6 sm:py-8 relative overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
            <div class="relative z-10 flex flex-col gap-5">
                <header class="flex items-center justify-between mb-1">
                    <h2 class="text-sm font-semibold uppercase tracking-wide text-slate-100 flex items-center gap-2">
                        <span class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-900/80 border border-amber-400/70 text-xs">ü™ô</span>
                        Coin Flip ‚Äî –û—Ä—ë–ª –∏–ª–∏ –†–µ—à–∫–∞
                    </h2>
                    <div id="coinStatus" class="text-[11px] text-slate-200/80"></div>
                </header>

                <section class="grid md:grid-cols-[1.3fr,1.1fr] gap-4 items-start">
                    <!-- Coin visual -->
                    <div class="flex flex-col items-center gap-4 bg-slate-950/70 border border-slate-700/90 rounded-2xl px-3 sm:px-4 py-4 shadow-xl">
                        <div class="relative w-32 h-32 sm:w-40 sm:h-40">
                            <div id="coinFace" class="w-full h-full rounded-full bg-gradient-to-br from-amber-300 via-yellow-400 to-amber-600 border-4 border-amber-200 shadow-[0_0_40px_rgba(251,191,36,0.35)] flex items-center justify-center text-3xl sm:text-4xl font-bold text-slate-900 transition-transform duration-500">
                                –û
                            </div>
                        </div>
                        <div class="text-center text-xs sm:text-sm text-slate-200">
                            <div>–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</div>
                            <div id="coinLast" class="font-semibold text-lg text-amber-300 mt-1">‚Äì</div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="bg-slate-950/80 border border-slate-700/90 rounded-2xl px-3 sm:px-4 py-4 shadow-xl flex flex-col gap-3 text-xs sm:text-sm">
                        <div class="flex flex-wrap gap-2 items-center">
                            <span class="text-slate-300/90">–í–∞—à–∞ —Å—Ç–∞–≤–∫–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—É</span>
                            <div class="ml-auto flex gap-1 bg-slate-900 rounded-full p-1 border border-slate-700">
                                <button id="coinChoiceHeads" class="coin-choice px-3 py-1 rounded-full text-[11px] font-semibold bg-amber-400 text-slate-950">–û—Ä—ë–ª</button>
                                <button id="coinChoiceTails" class="coin-choice px-3 py-1 rounded-full text-[11px] font-semibold bg-transparent text-slate-200">–†–µ—à–∫–∞</button>
                            </div>
                        </div>

                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-slate-300/90 text-[11px]">–°—Ç–∞–≤–∫–∞</span>
                            <input id="coinBet" type="number" min="10" step="10" value="50" class="w-24 rounded-xl bg-slate-900 border border-slate-700 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-amber-400/80" />
                            <span class="text-slate-500 text-[11px]">$</span>
                        </div>
                        <div class="flex flex-wrap gap-2 mt-1">
                            <button data-cchip="100" class="coin-chip rounded-full bg-emerald-500 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-emerald-400 transition">+100</button>
                            <button data-cchip="500" class="coin-chip rounded-full bg-sky-500 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-sky-400 transition">+500</button>
                            <button data-cchip="1000" class="coin-chip rounded-full bg-amber-400 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-amber-300 transition">+1000</button>
                            <button data-cchip="x2" class="coin-chip rounded-full bg-fuchsia-500 text-slate-50 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-fuchsia-400 transition">√ó2</button>
                        </div>

                        <button id="coinFlipBtn" class="mt-3 inline-flex items-center justify-center rounded-2xl bg-amber-400 text-slate-950 font-semibold text-sm py-2 shadow-lg shadow-amber-400/40 hover:bg-amber-300 transition">
                            –ü–æ–¥–±—Ä–æ—Å–∏—Ç—å –º–æ–Ω–µ—Ç–∫—É
                        </button>

                        <div class="mt-2 text-[11px] text-slate-400 space-y-1">
                            <p>–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–∞—è –º–æ–Ω–µ—Ç–∞: 50/50. –í—ã–∏–≥—Ä—ã—à: —Å—Ç–∞–≤–∫–∞ √ó2, –ø—Ä–æ–∏–≥—Ä—ã—à ‚Äî –ø–æ—Ç–µ—Ä—è —Å—Ç–∞–≤–∫–∏.</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- MINES -->
        <main id="tab-mines" class="hidden rounded-3xl border border-rose-500/70 glow-border px-4 sm:px-6 py-6 sm:py-8 relative overflow-hidden bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950">
            <div class="relative z-10 flex flex-col gap-5">
                <header class="flex items-center justify-between mb-1">
                    <h2 class="text-sm font-semibold uppercase tracking-wide text-slate-100 flex items-center gap-2">
                        <span class="inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-900/80 border border-rose-400/80 text-xs">üí£</span>
                        –ú–∏–Ω—ã ‚Äî —Ä–∏—Å–∫ –∏ –º–Ω–æ–∂–∏—Ç–µ–ª–∏
                    </h2>
                    <div id="minesStatus" class="text-[11px] text-slate-200/80"></div>
                </header>

                <section class="grid md:grid-cols-[1.4fr,1.1fr] gap-4 items-start">
                    <!-- Grid -->
                    <div class="bg-slate-950/80 border border-slate-700/90 rounded-2xl px-3 sm:px-4 py-4 shadow-xl flex flex-col gap-3">
                        <div class="grid grid-cols-5 gap-2">
                            <div id="minesGrid" class="contents"></div>
                        </div>
                    </div>

                    <!-- Controls info -->
                    <div class="bg-slate-950/80 border border-slate-700/90 rounded-2xl px-3 sm:px-4 py-4 shadow-xl flex flex-col gap-3 text-xs sm:text-sm">
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2">
                                <span class="text-slate-300/90 text-[11px]">–°—Ç–∞–≤–∫–∞</span>
                                <input id="minesBet" type="number" min="10" step="10" value="50" class="w-24 rounded-xl bg-slate-900 border border-slate-700 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-rose-400/80" />
                                <span class="text-slate-500 text-[11px]">$</span>
                            </div>
                            <div class="flex flex-wrap gap-2">
                                <button data-mchip="100" class="mines-chip rounded-full bg-emerald-500 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-emerald-400 transition">+100</button>
                                <button data-mchip="500" class="mines-chip rounded-full bg-sky-500 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-sky-400 transition">+500</button>
                                <button data-mchip="1000" class="mines-chip rounded-full bg-amber-400 text-slate-950 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-amber-300 transition">+1000</button>
                                <button data-mchip="x2" class="mines-chip rounded-full bg-fuchsia-500 text-slate-50 text-[11px] font-semibold px-3 py-1 chip-shadow hover:bg-fuchsia-400 transition">√ó2</button>
                            </div>
                        </div>

                        <div class="flex items-center gap-2 mt-2">
                            <span class="text-slate-300/90 text-[11px]">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω</span>
                            <input id="minesCount" type="number" min="3" max="15" value="5" class="w-20 rounded-xl bg-slate-900 border border-slate-700 px-2 py-1 text-xs focus:outline-none focus:ring-1 focus:ring-rose-400/80" />
                        </div>

                        <div class="flex flex-wrap gap-2 mt-2">
                            <button id="minesStart" class="flex-1 inline-flex items-center justify-center rounded-2xl bg-emerald-500 text-slate-950 font-semibold text-sm py-2 shadow-lg shadow-emerald-500/40 hover:bg-emerald-400 transition">
                                –ù–æ–≤–∞—è –∏–≥—Ä–∞
                            </button>
                            <button id="minesCashout" class="flex-1 inline-flex items-center justify-center rounded-2xl bg-slate-900 border border-slate-600 text-slate-100 font-semibold text-sm py-2 hover:bg-slate-800 transition disabled:opacity-60" disabled>
                                –ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à
                            </button>
                        </div>

                        <div class="mt-2 text-[11px] text-slate-400 space-y-1">
                            <p>–û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏ –±–µ–∑ –º–∏–Ω, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å. –ü–æ–ø–∞–¥—ë—Ç–µ –Ω–∞ –º–∏–Ω—É ‚Äî –ø–æ—Ç–µ—Ä—è–µ—Ç–µ —Å—Ç–∞–≤–∫—É. –ù–∞–∂–º–∏—Ç–µ ¬´–ó–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à¬ª, —á—Ç–æ–±—ã –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å.</p>
                            <p>–ò–≥—Ä–∞ —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∏ –Ω–µ –æ—Ç—Ä–∞–∂–∞–µ—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –∫–∞–∑–∏–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è.</p>
                        </div>

                        <div class="mt-1 text-xs text-slate-200">
                            –¢–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="minesMultiplier" class="font-semibold text-emerald-400">1.00√ó</span><br/>
                            –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: <span id="minesPotential" class="font-semibold text-emerald-400">$0</span>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- RIGHT: log & tips -->
        <aside class="space-y-4">
            <section class="bg-slate-950/70 border border-slate-700/80 rounded-2xl p-3 sm:p-4 h-60 sm:h-72 flex flex-col">
                <header class="flex items-center justify-between mb-2">
                    <h3 class="text-sm font-semibold text-slate-100">–ñ—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π</h3>
                    <button id="clearLogBtn" class="text-[11px] text-slate-500 hover:text-slate-300 transition">–û—á–∏—Å—Ç–∏—Ç—å</button>
                </header>
                <div id="log" class="flex-1 text-[11px] sm:text-xs text-slate-400 space-y-1 overflow-y-auto scrollbar-thin"></div>
            </section>

            <section class="bg-slate-950/80 border border-slate-700/80 rounded-2xl p-3 sm:p-4 text-[11px] sm:text-xs text-slate-300 space-y-2">
                <h3 class="text-sm font-semibold text-slate-100 mb-1">–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ –∏–≥—Ä–∞–º</h3>
                <ul class="list-disc list-inside space-y-1">
                    <li><span class="font-semibold text-emerald-300">–ë–ª—ç–∫–¥–∂–µ–∫:</span> —Ü–µ–ª—å ‚Äî 21 –æ—á–∫–æ –∏–ª–∏ –±–ª–∏–∂–µ, —á–µ–º —É —Å—Ç–æ–ª–∞, –Ω–µ –ø–µ—Ä–µ–±–∏—Ä–∞—è.</li>
                    <li><span class="font-semibold text-sky-300">–†—É–ª–µ—Ç–∫–∞:</span> –±–æ–ª—å—à–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã ‚Äî –≤—ã—à–µ —Ä–∏—Å–∫. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä–æ–º —Å—Ç–∞–≤–∫–∏.</li>
                    <li><span class="font-semibold text-amber-300">–ú–æ–Ω–µ—Ç–∫–∞:</span> —á–µ—Å—Ç–Ω—ã–π 50/50 ‚Äî –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É —Å–ª–∏—à–∫–æ–º —Ä–µ–∑–∫–æ.</li>
                    <li><span class="font-semibold text-rose-300">–ú–∏–Ω—ã:</span> —á–µ–º –±–æ–ª—å—à–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∫–ª–µ—Ç–æ–∫, —Ç–µ–º –≤—ã—à–µ —Ä–∏—Å–∫. –ó–∞–±–∏—Ä–∞–π—Ç–µ –≤—ã–∏–≥—Ä—ã—à –≤–æ–≤—Ä–µ–º—è.</li>
                </ul>
            </section>
        </aside>
    </div>

    <footer class="mt-6 text-[11px] text-slate-500 flex flex-wrap items-center justify-between gap-2">
        <span>7292 Casino Arcade ‚Ä¢ –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ª–æ–≥–∏–∫–∞, –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥.</span>
        <span id="seedLabel"></span>
    </footer>
</div>

<script>
// ==== –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ RNG ====
const balanceDisplay = document.getElementById('balanceDisplay');
const resetBalanceBtn = document.getElementById('resetBalanceBtn');
const logEl = document.getElementById('log');
const clearLogBtn = document.getElementById('clearLogBtn');
const seedLabel = document.getElementById('seedLabel');

let balance = 1000;

// –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏–∑ localStorage
const savedBalance = localStorage.getItem('casinoBalance_7292');
if (savedBalance !== null && !isNaN(Number(savedBalance))) {
    balance = Math.max(0, Math.floor(Number(savedBalance)));
}

const seed = Date.now().toString(36).slice(-6);
seedLabel.textContent = `–°–∏–¥ —Å—Ç–æ–ª–∞: ${seed}`;
let rngState = (function (s) {
    let h = 0;
    for (let i = 0; i < s.length; i++) h = (h * 31 + s.charCodeAt(i)) >>> 0;
    return h || 1;
})(seed);

function rand() {
    rngState ^= rngState << 13;
    rngState ^= rngState >>> 17;
    rngState ^= rngState << 5;
    return (rngState >>> 0) / 0xffffffff;
}

function persistBalance() {
    localStorage.setItem('casinoBalance_7292', String(balance));
}

function updateBalanceUI() {
    balanceDisplay.textContent = `$${balance.toLocaleString('ru-RU')}`;
}

function log(message) {
    const time = new Date().toLocaleTimeString('ru-RU', { hour12: false });
    const line = document.createElement('div');
    line.textContent = `[${time}] ${message}`;
    logEl.appendChild(line);
    logEl.scrollTop = logEl.scrollHeight;
}

resetBalanceBtn.addEventListener('click', () => {
    balance = 1000;
    persistBalance();
    updateBalanceUI();
    log('–ë–∞–ª–∞–Ω—Å —Å–±—Ä–æ—à–µ–Ω –¥–æ $1000');
});

clearLogBtn.addEventListener('click', () => { logEl.innerHTML = ''; });

// ==== –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫ ====
const gameTabs = Array.from(document.querySelectorAll('.game-tab'));
const gamePanels = {
    blackjack: document.getElementById('tab-blackjack'),
    roulette: document.getElementById('tab-roulette'),
    coinflip: document.getElementById('tab-coinflip'),
    mines: document.getElementById('tab-mines')
};

gameTabs.forEach(btn => {
    btn.addEventListener('click', () => {
        const tab = btn.dataset.tab;
        gameTabs.forEach(b => b.classList.remove('tab-active'));
        btn.classList.add('tab-active');
        Object.entries(gamePanels).forEach(([name, el]) => {
            if (name === tab) el.classList.remove('hidden');
            else el.classList.add('hidden');
        });
        log(`–í—ã –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ –∏–≥—Ä—É: ${btn.textContent.trim()}`);
    });
});

// ==== –ë–õ–≠–ö–î–ñ–ï–ö ====
const betInput = document.getElementById('betInput');
const dealBtn = document.getElementById('dealBtn');
const hitBtn = document.getElementById('hitBtn');
const standBtn = document.getElementById('standBtn');
const dealerCardsEl = document.getElementById('dealerCards');
const playerCardsEl = document.getElementById('playerCards');
const dealerScoreEl = document.getElementById('dealerScore');
const playerScoreEl = document.getElementById('playerScore');
const dealerStatusEl = document.getElementById('dealerStatus');
const playerStatusEl = document.getElementById('playerStatus');
const dealerHintEl = document.getElementById('dealerHint');
const playerHintEl = document.getElementById('playerHint');
const roundResultEl = document.getElementById('roundResult');
const roundSubtextEl = document.getElementById('roundSubtext');
const chipButtons = Array.from(document.querySelectorAll('.chip-btn'));
const statRounds = document.getElementById('statRounds');
const statWins = document.getElementById('statWins');
const statLosses = document.getElementById('statLosses');
const statPushes = document.getElementById('statPushes');

let deck = [];
let playerHand = [];
let dealerHand = [];
let currentBet = 50;
let inRound = false;
let stats = { rounds: 0, wins: 0, losses: 0, pushes: 0 };

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(rand() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

function createDeck() {
    const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
    const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
    const newDeck = [];
    for (const suit of suits) {
        for (const rank of ranks) newDeck.push({ rank, suit });
    }
    shuffle(newDeck);
    return newDeck;
}

function cardValue(card) {
    if (card.rank === 'A') return 11;
    if (['K', 'Q', 'J'].includes(card.rank)) return 10;
    return Number(card.rank);
}

function handValue(hand) {
    let total = 0, aces = 0;
    for (const c of hand) {
        total += cardValue(c);
        if (c.rank === 'A') aces++;
    }
    while (total > 21 && aces > 0) { total -= 10; aces--; }
    return total;
}

function createCardElement(card) {
    const cardContainer = document.createElement('div');
    cardContainer.className = 'card is-hidden relative w-14 h-20 sm:w-16 sm:h-24 rounded-xl bg-transparent';

    const inner = document.createElement('div');
    inner.className = 'card-inner w-full h-full relative';

    const front = document.createElement('div');
    front.className = 'card-face absolute inset-0 rounded-xl bg-slate-50 text-slate-900 border border-slate-300 flex flex-col justify-between p-1.5 sm:p-2 shadow-lg';

    const cornerTop = document.createElement('div');
    cornerTop.className = 'text-[10px] sm:text-xs';
    cornerTop.textContent = `${card.rank}${card.suit}`;

    const center = document.createElement('div');
    center.className = 'text-base sm:text-lg text-center';
    center.textContent = card.suit;

    const cornerBottom = document.createElement('div');
    cornerBottom.className = 'text-[10px] sm:text-xs self-end rotate-180';
    cornerBottom.textContent = `${card.rank}${card.suit}`;

    if (card.suit === '‚ô•' || card.suit === '‚ô¶') front.classList.add('text-rose-600');

    front.appendChild(cornerTop);
    front.appendChild(center);
    front.appendChild(cornerBottom);

    const back = document.createElement('div');
    back.className = 'card-face card-back absolute inset-0 rounded-xl bg-gradient-to-br from-sky-600 via-indigo-700 to-slate-900 border border-sky-400/80 flex items-center justify-center shadow-xl';
    back.innerHTML = '<div class="w-8 h-8 rounded-full border-2 border-sky-300 flex items-center justify-center text-xs font-semibold tracking-[0.2em] text-sky-100">BJ</div>';

    inner.appendChild(front);
    inner.appendChild(back);
    cardContainer.appendChild(inner);

    setTimeout(() => cardContainer.classList.remove('is-hidden'), 30);
    return cardContainer;
}

function updateHandsUI(revealDealer = false) {
    dealerCardsEl.innerHTML = '';
    playerCardsEl.innerHTML = '';

    dealerHand.forEach((card, index) => {
        const el = createCardElement(card);
        if (index === 1 && !revealDealer && inRound) {
            el.querySelector('.card-inner').style.transform = 'rotateY(180deg)';
        }
        dealerCardsEl.appendChild(el);
    });

    playerHand.forEach(card => playerCardsEl.appendChild(createCardElement(card)));

    const playerVal = handValue(playerHand);
    playerScoreEl.textContent = playerVal;

    if (inRound) {
        const visibleDealerHand = revealDealer ? dealerHand : [dealerHand[0]];
        const dealerVal = handValue(visibleDealerHand);
        dealerScoreEl.textContent = revealDealer ? dealerVal : `${dealerVal}+`;
    } else {
        dealerScoreEl.textContent = dealerHand.length ? handValue(dealerHand) : '?';
    }

    playerHintEl.textContent = playerVal >= 17 ? '–†–∏—Å–∫ –ø–µ—Ä–µ–±–æ—Ä–∞, –ø–æ–¥—É–º–∞–π—Ç–µ –æ "–•–≤–∞—Ç–∏—Ç"' : '–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤–∑—è—Ç—å –µ—â—ë –∫–∞—Ä—Ç—É';

    if (inRound && !revealDealer) {
        dealerHintEl.textContent = '–í–µ—Ä—Ö–Ω—è—è –∫–∞—Ä—Ç–∞ —Å—Ç–æ–ª–∞ —Å–∫—Ä—ã—Ç–∞ –¥–æ –∫–æ–Ω—Ü–∞ –≤–∞—à–µ–≥–æ —Ö–æ–¥–∞';
    } else if (dealerHand.length) {
        const dv = handValue(dealerHand);
        dealerHintEl.textContent = dv < 17 ? '–°—Ç–æ–ª, –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤–æ–∑—å–º—ë—Ç –µ—â—ë –∫–∞—Ä—Ç—É' : '–°—Ç–æ–ª –±–ª–∏–∑–æ–∫ –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ';
    } else {
        dealerHintEl.textContent = '';
    }
}

function updateStatsUI() {
    statRounds.textContent = stats.rounds;
    statWins.textContent = stats.wins;
    statLosses.textContent = stats.losses;
    statPushes.textContent = stats.pushes;
}

function setControlsState(state) {
    if (state === 'idle') {
        dealBtn.disabled = false;
        hitBtn.disabled = true;
        standBtn.disabled = true;
    } else if (state === 'acting') {
        dealBtn.disabled = true;
        hitBtn.disabled = false;
        standBtn.disabled = false;
    } else if (state === 'locked') {
        dealBtn.disabled = true;
        hitBtn.disabled = true;
        standBtn.disabled = true;
    }
}

function startRound() {
    currentBet = Math.max(10, Math.floor(Number(betInput.value) || 10));
    if (currentBet > balance) currentBet = balance;
    if (currentBet < 10) currentBet = 10;
    betInput.value = currentBet;

    if (currentBet > balance || balance <= 0) {
        roundResultEl.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤';
        roundSubtextEl.textContent = '–°–±—Ä–æ—Å—å—Ç–µ –±–∞–ª–∞–Ω—Å, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É.';
        setControlsState('idle');
        return;
    }

    balance -= currentBet;
    persistBalance();
    updateBalanceUI();
    log(`–ë–ª—ç–∫–¥–∂–µ–∫: –Ω–æ–≤–∞—è —Ä–∞–∑–¥–∞—á–∞, —Å—Ç–∞–≤–∫–∞ $${currentBet}`);

    inRound = true;
    playerHand = [];
    dealerHand = [];

    if (deck.length < 15) {
        deck = createDeck();
        log('–ë–ª—ç–∫–¥–∂–µ–∫: –∫–æ–ª–æ–¥–∞ –ø–µ—Ä–µ—Ç–∞—Å–æ–≤–∞–Ω–∞');
    }

    playerHand.push(deck.pop());
    dealerHand.push(deck.pop());
    playerHand.push(deck.pop());
    dealerHand.push(deck.pop());

    roundResultEl.textContent = '';
    roundSubtextEl.textContent = '';
    dealerStatusEl.textContent = '–•–æ–¥ –∏–≥—Ä–æ–∫–∞';
    playerStatusEl.textContent = '–í–∞—à —Ö–æ–¥';

    setControlsState('acting');
    updateHandsUI(false);

    const pVal = handValue(playerHand);
    const dVal = handValue(dealerHand);
    if (pVal === 21 || dVal === 21) setTimeout(() => finishRound(true), 500);
}

function playerHit() {
    if (!inRound) return;
    if (deck.length === 0) deck = createDeck();
    const card = deck.pop();
    playerHand.push(card);
    log(`–ë–ª—ç–∫–¥–∂–µ–∫: –∏–≥—Ä–æ–∫ –±–µ—Ä—ë—Ç –∫–∞—Ä—Ç—É ${card.rank}${card.suit}`);
    updateHandsUI(false);
    const value = handValue(playerHand);
    if (value > 21) setTimeout(() => finishRound(false), 600);
}

function dealerPlay(callback) {
    dealerStatusEl.textContent = '–°—Ç–æ–ª –¥–æ–±–∏—Ä–∞–µ—Ç –∫–∞—Ä—Ç—ã...';

    const step = () => {
        const value = handValue(dealerHand);
        if (value < 17) {
            if (deck.length === 0) deck = createDeck();
            const card = deck.pop();
            dealerHand.push(card);
            log(`–ë–ª—ç–∫–¥–∂–µ–∫: —Å—Ç–æ–ª –±–µ—Ä—ë—Ç –∫–∞—Ä—Ç—É ${card.rank}${card.suit}`);
            updateHandsUI(true);
            setTimeout(step, 700);
        } else {
            dealerStatusEl.textContent = '–°—Ç–æ–ª –∑–∞–≤–µ—Ä—à–∏–ª –¥–æ–±–æ—Ä –∫–∞—Ä—Ç';
            callback();
        }
    };

    setTimeout(step, 800);
}

function finishRound(initial = false) {
    inRound = false;
    setControlsState('locked');
    dealerStatusEl.textContent = '–ö–∞—Ä—Ç—ã —Å—Ç–æ–ª–∞ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è...';
    updateHandsUI(true);

    const finalize = () => {
        const p = handValue(playerHand);
        const d = handValue(dealerHand);
        let result;

        if (p > 21) result = 'lose';
        else if (d > 21) result = 'win';
        else if (p > d) result = 'win';
        else if (p < d) result = 'lose';
        else result = 'push';

        if (result === 'win') {
            const reward = currentBet * 2;
            balance += reward;
            stats.wins++;
            roundResultEl.textContent = '–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏!';
            roundResultEl.className = 'text-lg sm:text-xl font-semibold text-emerald-400';
            roundSubtextEl.textContent = `–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ $${reward}. –ò—Ç–æ–≥–æ–≤–∞—è —Ä—É–∫–∞: ${p} –ø—Ä–æ—Ç–∏–≤ ${d}.`;
            log(`–ë–ª—ç–∫–¥–∂–µ–∫: –ø–æ–±–µ–¥–∞ –∏–≥—Ä–æ–∫–∞. –ò–≥—Ä–æ–∫ ${p}, —Å—Ç–æ–ª ${d}. –í—ã–ø–ª–∞—Ç–∞ $${reward}`);
        } else if (result === 'lose') {
            stats.losses++;
            roundResultEl.textContent = '–ü–æ—Ä–∞–∂–µ–Ω–∏–µ';
            roundResultEl.className = 'text-lg sm:text-xl font-semibold text-rose-400';
            roundSubtextEl.textContent = `–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ —Å—Ç–∞–≤–∫—É $${currentBet}. –ò—Ç–æ–≥–æ–≤–∞—è —Ä—É–∫–∞: ${p} –ø—Ä–æ—Ç–∏–≤ ${d}.`;
            log(`–ë–ª—ç–∫–¥–∂–µ–∫: –ø–æ—Ä–∞–∂–µ–Ω–∏–µ. –ò–≥—Ä–æ–∫ ${p}, —Å—Ç–æ–ª ${d}. –ü–æ—Ç–µ—Ä—è $${currentBet}`);
        } else {
            balance += currentBet;
            stats.pushes++;
            roundResultEl.textContent = '–ù–∏—á—å—è';
            roundResultEl.className = 'text-lg sm:text-xl font-semibold text-sky-300';
            roundSubtextEl.textContent = `–°—Ç–∞–≤–∫–∞ $${currentBet} –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞. –ò—Ç–æ–≥–æ–≤–∞—è —Ä—É–∫–∞: ${p} –ø—Ä–æ—Ç–∏–≤ ${d}.`;
            log(`–ë–ª—ç–∫–¥–∂–µ–∫: –Ω–∏—á—å—è. –ò–≥—Ä–æ–∫ ${p}, —Å—Ç–æ–ª ${d}.`);
        }

        stats.rounds++;
        persistBalance();
        updateBalanceUI();
        updateStatsUI();

        dealerStatusEl.textContent = '–°—Ç–æ–ª –∂–¥—ë—Ç –Ω–æ–≤—É—é —Ä–∞–∑–¥–∞—á—É';
        playerStatusEl.textContent = '–ù–∞–∂–º–∏—Ç–µ "–†–∞–∑–¥–∞—Ç—å", —á—Ç–æ–±—ã —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë';
        setControlsState('idle');
    };

    if (initial || handValue(playerHand) > 21) finalize();
    else dealerPlay(finalize);
}

// –°–ª—É—à–∞—Ç–µ–ª–∏ –±–ª—ç–∫–¥–∂–µ–∫–∞
dealBtn.addEventListener('click', () => { if (!inRound) startRound(); });
hitBtn.addEventListener('click', playerHit);
standBtn.addEventListener('click', () => {
    if (!inRound) return;
    playerStatusEl.textContent = '–í—ã –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å';
    finishRound(false);
});

chipButtons.forEach(btn => {
    btn.addEventListener('click', () => {
        const type = btn.dataset.chip;
        let current = Number(betInput.value) || 0;
        if (type === 'x2') {
            let next = current * 2;
            if (next > balance) next = balance;
            betInput.value = Math.max(10, next || 10);
        } else {
            const value = Number(type);
            let next = current + value;
            if (next > balance) next = balance;
            betInput.value = Math.max(10, next);
        }
    });
});

betInput.addEventListener('change', () => {
    let v = Math.floor(Number(betInput.value) || 10);
    if (v < 10) v = 10;
    if (v > balance) v = balance;
    betInput.value = v;
});

// ==== –†–£–õ–ï–¢–ö–ê ====
const rouletteBetType = document.getElementById('rouletteBetType');
const rouletteNumberWrapper = document.getElementById('rouletteNumberWrapper');
const rouletteNumber = document.getElementById('rouletteNumber');
const rouletteBet = document.getElementById('rouletteBet');
const rouletteSpin = document.getElementById('rouletteSpin');
const rouletteLast = document.getElementById('rouletteLast');
const rouletteStatus = document.getElementById('rouletteStatus');
const rouletteChipBtns = Array.from(document.querySelectorAll('.roulette-chip'));

rouletteBetType.addEventListener('change', () => {
    rouletteNumberWrapper.classList.toggle('hidden', rouletteBetType.value !== 'single');
});

rouletteChipBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        const type = btn.dataset.rchip;
        let current = Number(rouletteBet.value) || 0;
        if (type === 'x2') {
            let next = current * 2;
            if (next > balance) next = balance;
            rouletteBet.value = Math.max(10, next || 10);
        } else {
            const value = Number(type);
            let next = current + value;
            if (next > balance) next = balance;
            rouletteBet.value = Math.max(10, next);
        }
    });
});

rouletteSpin.addEventListener('click', () => {
    let stake = Math.max(10, Math.floor(Number(rouletteBet.value) || 10));
    if (stake > balance) stake = balance;
    rouletteBet.value = stake;
    if (stake <= 0 || balance <= 0) {
        rouletteStatus.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤';
        return;
    }

    balance -= stake;
    persistBalance();
    updateBalanceUI();

    const roll = Math.floor(rand() * 37); // 0-36
    const isRed = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36].includes(roll);
    const isBlack = roll !== 0 && !isRed;

    let win = 0;
    let type = rouletteBetType.value;
    let desc = '';

    if (type === 'red' && isRed) { win = stake * 2; desc = '–∫—Ä–∞—Å–Ω–æ–µ'; }
    else if (type === 'black' && isBlack) { win = stake * 2; desc = '—á—ë—Ä–Ω–æ–µ'; }
    else if (type === 'even' && roll !== 0 && roll % 2 === 0) { win = stake * 2; desc = '—á—ë—Ç'; }
    else if (type === 'first12' && roll >= 1 && roll <= 12) { win = stake * 3; desc = '1‚Äì12'; }
    else if (type === 'second12' && roll >= 13 && roll <= 24) { win = stake * 3; desc = '13‚Äì24'; }
    else if (type === 'third12' && roll >= 25 && roll <= 36) { win = stake * 3; desc = '25‚Äì36'; }
    else if (type === 'single') {
        const chosen = Math.min(36, Math.max(0, Number(rouletteNumber.value) || 0));
        rouletteNumber.value = chosen;
        if (roll === chosen) { win = stake * 36; desc = `—á–∏—Å–ª–æ ${chosen}`; }
    }

    balance += win;
    persistBalance();
    updateBalanceUI();

    rouletteLast.textContent = roll;
    if (win > 0) {
        rouletteStatus.textContent = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ $${win} (–≤–∫–ª—é—á–∞—è —Å—Ç–∞–≤–∫—É).`;
        log(`–†—É–ª–µ—Ç–∫–∞: –≤—ã–ø–∞–ª–æ ${roll}. –í—ã–∏–≥—Ä—ã—à $${win} (${desc || type}).`);
    } else {
        rouletteStatus.textContent = `–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ —Å—Ç–∞–≤–∫—É $${stake}.`;
        log(`–†—É–ª–µ—Ç–∫–∞: –≤—ã–ø–∞–ª–æ ${roll}. –ü—Ä–æ–∏–≥—Ä—ã—à $${stake}.`);
    }
});

// ==== COIN FLIP ====
const coinFace = document.getElementById('coinFace');
const coinLast = document.getElementById('coinLast');
const coinStatus = document.getElementById('coinStatus');
const coinBet = document.getElementById('coinBet');
const coinFlipBtn = document.getElementById('coinFlipBtn');
const coinChoiceHeads = document.getElementById('coinChoiceHeads');
const coinChoiceTails = document.getElementById('coinChoiceTails');
const coinChipBtns = Array.from(document.querySelectorAll('.coin-chip'));

let coinChoice = 'heads';

coinChoiceHeads.addEventListener('click', () => {
    coinChoice = 'heads';
    coinChoiceHeads.classList.add('bg-amber-400', 'text-slate-950');
    coinChoiceTails.classList.remove('bg-amber-400', 'text-slate-950');
});

coinChoiceTails.addEventListener('click', () => {
    coinChoice = 'tails';
    coinChoiceTails.classList.add('bg-amber-400', 'text-slate-950');
    coinChoiceHeads.classList.remove('bg-amber-400', 'text-slate-950');
});

coinChipBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        const type = btn.dataset.cchip;
        let current = Number(coinBet.value) || 0;
        if (type === 'x2') {
            let next = current * 2;
            if (next > balance) next = balance;
            coinBet.value = Math.max(10, next || 10);
        } else {
            const value = Number(type);
            let next = current + value;
            if (next > balance) next = balance;
            coinBet.value = Math.max(10, next);
        }
    });
});

coinFlipBtn.addEventListener('click', () => {
    let stake = Math.max(10, Math.floor(Number(coinBet.value) || 10));
    if (stake > balance) stake = balance;
    coinBet.value = stake;
    if (stake <= 0 || balance <= 0) {
        coinStatus.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤';
        return;
    }

    balance -= stake;
    persistBalance();
    updateBalanceUI();

    // –∞–Ω–∏–º–∞—Ü–∏—è
    coinFace.style.transform = 'rotateY(720deg)';

    setTimeout(() => {
        const result = rand() < 0.5 ? 'heads' : 'tails';
        const isWin = result === coinChoice;
        let win = 0;
        if (isWin) {
            win = stake * 2;
            balance += win;
            persistBalance();
            updateBalanceUI();
        }
        const label = result === 'heads' ? '–û—Ä—ë–ª' : '–†–µ—à–∫–∞';
        coinFace.textContent = result === 'heads' ? '–û' : '–†';
        coinLast.textContent = label;
        coinFace.style.transform = 'rotateY(0deg)';

        if (isWin) {
            coinStatus.textContent = `–ü–æ–±–µ–¥–∞! –í—ã –ø–æ–ª—É—á–∏–ª–∏ $${win}.`;
            log(`–ú–æ–Ω–µ—Ç–∫–∞: –≤—ã–ø–∞–ª–∞ —Å—Ç–æ—Ä–æ–Ω–∞ "${label}". –í—ã–∏–≥—Ä—ã—à $${win}.`);
        } else {
            coinStatus.textContent = `–ü—Ä–æ–∏–≥—Ä—ã—à. –ü–æ—Ç–µ—Ä—è $${stake}.`;
            log(`–ú–æ–Ω–µ—Ç–∫–∞: –≤—ã–ø–∞–ª–∞ —Å—Ç–æ—Ä–æ–Ω–∞ "${label}". –ü—Ä–æ–∏–≥—Ä—ã—à $${stake}.`);
        }
    }, 400);
});

// ==== MINES ====
const minesGridEl = document.getElementById('minesGrid');
const minesBet = document.getElementById('minesBet');
const minesCountInput = document.getElementById('minesCount');
const minesStartBtn = document.getElementById('minesStart');
const minesCashoutBtn = document.getElementById('minesCashout');
const minesStatus = document.getElementById('minesStatus');
const minesMultiplierEl = document.getElementById('minesMultiplier');
const minesPotentialEl = document.getElementById('minesPotential');
const minesChipBtns = Array.from(document.querySelectorAll('.mines-chip'));

let minesState = {
    active: false,
    bombs: new Set(),
    openedSafe: 0,
    bet: 0,
    count: 5,
    multiplier: 1
};

function resetMinesGrid() {
    minesGridEl.innerHTML = '';
    for (let i = 0; i < 25; i++) {
        const btn = document.createElement('button');
        btn.className = 'mine-cell aspect-square rounded-xl bg-slate-900 border border-slate-700 flex items-center justify-center text-lg text-slate-300';
        btn.dataset.index = i;
        btn.disabled = !minesState.active;
        btn.addEventListener('click', onMineClick);
        minesGridEl.appendChild(btn);
    }
}

function updateMinesInfo() {
    minesMultiplierEl.textContent = `${minesState.multiplier.toFixed(2)}√ó`;
    minesPotentialEl.textContent = `$${Math.round(minesState.bet * minesState.multiplier)}`;
}

function startMinesGame() {
    if (minesState.active) {
        minesStatus.textContent = '–ò–≥—Ä–∞ —É–∂–µ –∏–¥—ë—Ç ‚Äî —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –µ—ë –∏–ª–∏ –∑–∞–±–µ—Ä–∏—Ç–µ –≤—ã–∏–≥—Ä—ã—à.';
        return;
    }

    let bet = Math.max(10, Math.floor(Number(minesBet.value) || 10));
    if (bet > balance) bet = balance;
    minesBet.value = bet;
    if (bet <= 0 || balance <= 0) {
        minesStatus.textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤';
        return;
    }

    const count = Math.min(15, Math.max(3, Number(minesCountInput.value) || 5));
    minesCountInput.value = count;

    balance -= bet;
    persistBalance();
    updateBalanceUI();

    minesState.active = true;
    minesState.bombs = new Set();
    minesState.openedSafe = 0;
    minesState.bet = bet;
    minesState.count = count;
    minesState.multiplier = 1;

    while (minesState.bombs.size < count) {
        minesState.bombs.add(Math.floor(rand() * 25));
    }

    minesStatus.textContent = '–ò–≥—Ä–∞ –∑–∞–ø—É—â–µ–Ω–∞ ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –∫–ª–µ—Ç–∫–∏.';
    minesCashoutBtn.disabled = false;

    resetMinesGrid();
    updateMinesInfo();
    log(`–ú–∏–Ω—ã: –Ω–æ–≤–∞—è –∏–≥—Ä–∞. –°—Ç–∞–≤–∫–∞ $${bet}, –º–∏–Ω ${count}.`);
}

function endMinesGame(exploded) {
    minesState.active = false;
    minesCashoutBtn.disabled = true;
    const cells = Array.from(minesGridEl.children);
    cells.forEach((btn, index) => {
        btn.disabled = true;
        if (minesState.bombs.has(index)) {
            btn.textContent = 'üí£';
            btn.classList.add('border-rose-500', 'bg-rose-900/60');
        }
    });
    if (exploded) {
        minesStatus.textContent = '–í—ã –ø–æ–¥–æ—Ä–≤–∞–ª–∏—Å—å –Ω–∞ –º–∏–Ω–µ ‚Äî —Å—Ç–∞–≤–∫–∞ –ø–æ—Ç–µ—Ä—è–Ω–∞.';
    }
}

function onMineClick(e) {
    if (!minesState.active) return;
    const btn = e.currentTarget;
    const index = Number(btn.dataset.index);
    if (minesState.bombs.has(index)) {
        btn.textContent = 'üí£';
        btn.classList.add('border-rose-500', 'bg-rose-900/70');
        log('–ú–∏–Ω—ã: –≤—ã –ø–æ–ø–∞–ª–∏ –Ω–∞ –º–∏–Ω—É, —Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–∏–≥—Ä–∞–Ω–∞.');
        endMinesGame(true);
        return;
    }
    btn.textContent = 'üíé';
    btn.classList.add('border-emerald-400', 'bg-emerald-900/60');
    btn.disabled = true;
    minesState.openedSafe++;

    const base = 1 + (minesState.count / 25) * 0.7;
    minesState.multiplier = Math.min(20, Math.pow(base, minesState.openedSafe));

    updateMinesInfo();
    minesStatus.textContent = '–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∫–ª–µ—Ç–∫–∞ ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏–ª–∏ –∑–∞–±—Ä–∞—Ç—å –≤—ã–∏–≥—Ä—ã—à.';
}

minesStartBtn.addEventListener('click', startMinesGame);

minesCashoutBtn.addEventListener('click', () => {
    if (!minesState.active) return;
    const reward = Math.round(minesState.bet * minesState.multiplier);
    balance += reward;
    persistBalance();
    updateBalanceUI();
    minesStatus.textContent = `–í—ã –∑–∞–±—Ä–∞–ª–∏ $${reward}. –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.`;
    log(`–ú–∏–Ω—ã: –∫—ç—à-–∞—É—Ç $${reward} –ø—Ä–∏ –º–Ω–æ–∂–∏—Ç–µ–ª–µ ${minesState.multiplier.toFixed(2)}√ó.`);
    endMinesGame(false);
});

minesChipBtns.forEach(btn => {
    btn.addEventListener('click', () => {
        const type = btn.dataset.mchip;
        let current = Number(minesBet.value) || 0;
        if (type === 'x2') {
            let next = current * 2;
            if (next > balance) next = balance;
            minesBet.value = Math.max(10, next || 10);
        } else {
            const value = Number(type);
            let next = current + value;
            if (next > balance) next = balance;
            minesBet.value = Math.max(10, next);
        }
    });
});

minesCountInput.addEventListener('change', () => {
    let v = Math.floor(Number(minesCountInput.value) || 5);
    if (v < 3) v = 3;
    if (v > 15) v = 15;
    minesCountInput.value = v;
});

// ==== –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ====
updateBalanceUI();
updateStatsUI();

// –Ω–∞—á–∞–ª—å–Ω–∞—è –∫–æ–ª–æ–¥–∞ –¥–ª—è –±–ª—ç–∫–¥–∂–µ–∫–∞
deck = createDeck();
dealerStatusEl.textContent = '–°—Ç–æ–ª –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–≤–æ–π —Ä–∞–∑–¥–∞—á–µ';
playerStatusEl.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É –∏ –Ω–∞–∂–º–∏—Ç–µ "–†–∞–∑–¥–∞—Ç—å"';

resetMinesGrid();
minesStatus.textContent = '–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏—Ç–µ "–ù–æ–≤–∞—è –∏–≥—Ä–∞".';

log('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ 7292 Casino Arcade!');
</script>
</body>
</html>
